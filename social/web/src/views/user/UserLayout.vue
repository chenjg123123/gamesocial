<script setup lang="ts">
import { computed } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()

const active = computed(() => {
  const p = route.path || ''
  if (p.startsWith('/user/index')) return 'index'
  if (p.startsWith('/user/tasks')) return 'tasks'
  if (p.startsWith('/user/shop')) return 'shop'
  if (p.startsWith('/user/tournaments')) return 'tournaments'
  if (p.startsWith('/user/me')) return 'me'
  return 'index'
})
</script>

<template>
  <div class="topbar">
    <div class="topbar__inner container">
      <div class="title">GameSocial</div>
    </div>
  </div>

  <div class="page">
    <div class="container">
      <RouterView v-slot="{ Component }">
        <component :is="Component" :key="route.fullPath" />
      </RouterView>
    </div>
  </div>

  <div class="bottombar">
    <div class="bottombar__inner">
      <RouterLink class="navitem" :class="{ 'navitem--active': active === 'index' }" to="/user/index">
        <div class="navitem__icon">ğŸ </div>
        <div class="navitem__label">é¦–é¡µ</div>
      </RouterLink>
      <RouterLink class="navitem" :class="{ 'navitem--active': active === 'tasks' }" to="/user/tasks">
        <div class="navitem__icon">âœ…</div>
        <div class="navitem__label">ä»»åŠ¡</div>
      </RouterLink>
      <RouterLink class="navitem" :class="{ 'navitem--active': active === 'shop' }" to="/user/shop">
        <div class="navitem__icon">ğŸ›ï¸</div>
        <div class="navitem__label">å•†åŸ</div>
      </RouterLink>
      <RouterLink class="navitem" :class="{ 'navitem--active': active === 'tournaments' }" to="/user/tournaments">
        <div class="navitem__icon">ğŸ†</div>
        <div class="navitem__label">èµ›äº‹</div>
      </RouterLink>
      <RouterLink class="navitem" :class="{ 'navitem--active': active === 'me' }" to="/user/me">
        <div class="navitem__icon">ğŸ‘¤</div>
        <div class="navitem__label">æˆ‘çš„</div>
      </RouterLink>
    </div>
  </div>
</template>
