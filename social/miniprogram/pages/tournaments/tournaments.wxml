<navigation-bar title="赛事" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="page">
    <view class="section-title">近期赛事</view>
    <view wx:if="{{items.length === 0}}" class="empty">暂无赛事</view>
    <view wx:for="{{items}}" wx:key="id" class="card">
      <view class="title">{{item.title}}</view>
      <view class="meta">{{item.startAt}} - {{item.endAt}}</view>
      <view class="content" wx:if="{{item.content}}">{{item.content}}</view>
      <view class="actions">
        <button
          size="mini"
          type="{{item.joined ? 'default' : 'primary'}}"
          data-id="{{item.id}}"
          bindtap="{{item.joined ? 'cancelJoin' : 'join'}}"
        >
          {{item.joined ? '已报名' : '报名'}}
        </button>
      </view>
    </view>

    <view class="section-title">我的成绩</view>
    <view wx:if="{{results.length === 0}}" class="empty">暂无成绩</view>
    <view wx:for="{{results}}" wx:key="tournamentId" class="row">
      <view class="row-left">
        <view class="row-title">{{item.title || ('赛事#' + item.tournamentId)}}</view>
        <view class="row-sub">{{item.publishedAt}}</view>
      </view>
      <view class="row-right">第{{item.rankNo}}名</view>
    </view>
  </view>
</scroll-view>

