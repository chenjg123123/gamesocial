<navigation-bar title="ä»»åŠ¡ä¸­å¿ƒ" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="page">
    <view class="hero-section">
      <view class="hero-content">
        <view class="h1">æ¯æ—¥ä»»åŠ¡</view>
        <view class="body-text">å®Œæˆä»»åŠ¡ï¼Œç§¯æ”’ç§¯åˆ†</view>
      </view>
      <button class="checkin-btn" bindtap="doCheckin" loading="{{checkinLoading}}">
        <text class="checkin-icon">ğŸ“</text>
        <text>åˆ°åº—æ‰“å¡</text>
      </button>
    </view>

    <view wx:if="{{items.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">ä»Šæ—¥ä»»åŠ¡å·²å…¨éƒ¨å®Œæˆ</view>
      <button size="mini" bindtap="refresh" loading="{{loading}}">åˆ·æ–°åˆ—è¡¨</button>
    </view>

    <view class="task-list">
      <view wx:for="{{items}}" wx:key="taskCode" class="task-card {{item.status === 'completed' ? 'completed' : ''}}">
        <view class="task-left">
          <view class="task-icon-wrapper">
             <text class="task-icon">ğŸ¯</text>
          </view>
          <view class="task-info">
            <view class="task-title">{{item.name}}</view>
            <view class="task-progress-bar">
              <view class="progress-fill" style="width: {{item.progressCount / item.targetCount * 100}}%"></view>
            </view>
            <view class="task-meta">
              <text class="task-type">{{item.periodType}}</text>
              <text class="task-count">{{item.progressCount}}/{{item.targetCount}}</text>
              <text class="task-reward">+{{item.rewardPoints}} ç§¯åˆ†</text>
            </view>
          </view>
        </view>
        
        <view class="task-right">
          <button
            class="claim-btn"
            disabled="{{!(item.canClaim || item.canReward)}}"
            data-code="{{item.taskCode || item.id}}"
            bindtap="claim"
          >
            {{item.canClaim || item.canReward ? 'é¢†å–' : 'æœªå®Œæˆ'}}
          </button>
        </view>
      </view>
    </view>
  </view>
</scroll-view>

