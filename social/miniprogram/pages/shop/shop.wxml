<navigation-bar title="兑换" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="page">
    <view class="section-title">积分商品</view>
    <view wx:if="{{goods.length === 0}}" class="empty">暂无商品</view>
    <view wx:for="{{goods}}" wx:key="id" class="goods-card">
      <view class="goods-title">{{item.name}}</view>
      <view class="goods-sub">需要 {{item.pointsPrice}} 积分</view>
      <view class="goods-actions">
        <button size="mini" type="primary" data-id="{{item.id}}" bindtap="redeemGoods">兑换</button>
      </view>
    </view>

    <view class="section-title">我的订单</view>
    <view wx:if="{{orders.length === 0}}" class="empty">暂无订单</view>
    <view wx:for="{{orders}}" wx:key="id" class="order-row">
      <view class="order-left">
        <view class="order-no">{{item.orderNo || ('订单#' + item.id)}}</view>
        <view class="order-sub">{{item.status}} · {{item.createdAt}}</view>
      </view>
      <view class="order-right">
        <view class="order-points">-{{item.totalPoints}}</view>
        <button wx:if="{{item.status === 'CREATED'}}" size="mini" data-id="{{item.id}}" bindtap="cancelOrder">取消</button>
      </view>
    </view>
  </view>
</scroll-view>

