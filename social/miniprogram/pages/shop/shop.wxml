<navigation-bar title="ç§¯åˆ†å•†åŸ" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="page">
    <view class="header-banner">
      <view class="h1">ç²¾é€‰å¥½ç¤¼</view>
      <view class="body-text">ç§¯åˆ†å½“é’±èŠ±ï¼Œå¥½ç¤¼å¸¦å›å®¶</view>
    </view>

    <view wx:if="{{goods.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ›ï¸</view>
      <view class="empty-text">å•†å“æ­£åœ¨ä¸Šæ¶ä¸­</view>
    </view>

    <view class="goods-grid">
      <view wx:for="{{goods}}" wx:key="id" class="goods-item">
        <view class="goods-cover">
          <text class="goods-icon">ğŸ</text>
        </view>
        <view class="goods-info">
          <view class="goods-name">{{item.name}}</view>
          <view class="goods-price">
            <text class="price-val">{{item.pointsPrice}}</text>
            <text class="price-unit">ç§¯åˆ†</text>
          </view>
        </view>
        <button class="redeem-btn" data-id="{{item.id}}" bindtap="redeemGoods">ç«‹å³å…‘æ¢</button>
      </view>
    </view>

    <view class="section-divider" wx:if="{{orders.length > 0}}"></view>

    <view class="orders-section" wx:if="{{orders.length > 0}}">
      <view class="section-header">
        <text class="h3">å…‘æ¢è®°å½•</text>
      </view>
      
      <view wx:for="{{orders}}" wx:key="id" class="order-card">
        <view class="order-header">
          <view class="order-no">{{item.orderNo || ('è®¢å•#' + item.id)}}</view>
          <view class="order-status {{item.status}}">{{item.status}}</view>
        </view>
        <view class="order-body">
          <view class="order-time">{{item.createdAt}}</view>
          <view class="order-cost">-{{item.totalPoints}} ç§¯åˆ†</view>
        </view>
        <view class="order-footer" wx:if="{{item.status === 'CREATED'}}">
          <button class="cancel-btn" size="mini" data-id="{{item.id}}" bindtap="cancelOrder">å–æ¶ˆè®¢å•</button>
        </view>
      </view>
    </view>
  </view>
</scroll-view>

